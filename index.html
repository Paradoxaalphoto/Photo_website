<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YorN – Alpha (CDN Models)</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/face-api.js"></script>
</head>
<body class="bg-neutral-50 text-neutral-900">
<div class="max-w-4xl mx-auto p-4">
<h1 class="text-2xl font-bold">YorN — Alpha</h1>
<p class="mb-4 text-sm text-neutral-600">Research-grade facial analysis (Alpha). No branding. CDN models.</p>
<input id="fileInput" type="file" accept="image/*" class="border p-2 rounded"/>
<canvas id="overlay" class="mt-4 border rounded"></canvas>
</div>
<script>
const MODELS_BASE = "https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/weights";
async function loadModels(){
  await faceapi.nets.ssdMobilenetv1.loadFromUri(MODELS_BASE);
  await faceapi.nets.faceLandmark68Net.loadFromUri(MODELS_BASE);
}
loadModels();
document.getElementById('fileInput').addEventListener('change', async (e) => {
  const file = e.target.files[0];
  const img = await faceapi.bufferToImage(file);
  const canvas = document.getElementById('overlay');
  const detections = await faceapi.detectAllFaces(img).withFaceLandmarks();
  faceapi.matchDimensions(canvas, { width: img.width, height: img.height });
  const resized = faceapi.resizeResults(detections, { width: img.width, height: img.height });
  faceapi.draw.drawDetections(canvas, resized);
  faceapi.draw.drawFaceLandmarks(canvas, resized);
});
</script>
</body>
</html>
